<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guestbook</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Patrick+Hand&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ENjdO4Dr2bkBIFxQpeoA6DQD1P1L1iieaFf/nJGzIxFDsf4x0xIM+B07jRMXj6l" crossorigin="anonymous">
    <style>
        body { background: #fffbe7; }
        .guestbook-form { margin: 60px auto; max-width: 400px; background: #fff; border-radius: 16px; box-shadow: 0 4px 16px #b388ff33; padding: 32px; position: relative; }
        .guestbook-form label { font-family: 'Patrick Hand', cursive; color: #b388ff; font-size: 1.2em; }
        .guestbook-form textarea { width: 100%; min-height: 80px; border-radius: 8px; border: 1px solid #b388ff; font-family: 'Caveat', cursive; font-size: 1.2em; padding: 8px; margin-top: 8px; }
        .guestbook-form button { margin-top: 16px; font-family: 'Patrick Hand', cursive; font-size: 1.1em; background: #ffb6b9; color: #fff; border: none; border-radius: 8px; padding: 10px 24px; cursor: pointer; }
        .guestbook-messages { margin-top: 32px; }
        .guestbook-message { background: #f9c5d1; color: #b388ff; border-radius: 8px; padding: 12px; margin-bottom: 12px; font-family: 'Caveat', cursive; font-size: 1.1em; }
        /* Paper airplane animation styles */
        .paper-airplane-container { position: fixed; top: 20px; right: 20px; width: 100px; height: 100px; overflow: visible; }
        .paper-airplane { width: 100%; height: auto; position: absolute; top: 0; right: 0; animation: fly 4s linear infinite; }
        .paper-trail { position: absolute; top: 20px; right: 10px; width: 120vw; height: 20px; overflow: visible; }
        @keyframes fly {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-10px, -10px) rotate(-10deg); }
            50% { transform: translate(0, -20px) rotate(0deg); }
            75% { transform: translate(10px, -10px) rotate(10deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
    </style>
</head>
<body>
    <!-- Paper airplane SVG animation -->
    <svg class="paper-airplane-svg" style="--airplane-top: 16vh;" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
      <polygon points="5,30 55,10 30,35 35,40 55,10 30,55" fill="#fff" stroke="#b388ff" stroke-width="2"/>
      <polygon points="30,35 35,40 55,10" fill="#b388ff" opacity="0.2"/>
    </svg>
    <span class="paper-airplane-trail" style="--airplane-top: 16vh;">
      <svg width="120vw" height="20" viewBox="0 0 600 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 10 Q 150 0 300 10 Q 450 20 600 10" stroke="#b388ff" stroke-width="3" stroke-dasharray="10 8" fill="none"/>
      </svg>
    </span>
    <script>
      function randomMoveDoodles() {
        document.querySelectorAll('.doodle.movable').forEach(function(el) {
          let x = Math.random() * (window.innerWidth - el.width);
          let y = Math.random() * (window.innerHeight - el.height);
          el.style.transform = `translate(${x}px, ${y}px)`;
        });
      }
      setInterval(randomMoveDoodles, 3500);
      function randomizeAirplane() {
        let top = Math.floor(Math.random() * 60 + 10) + 'vh';
        document.querySelectorAll('.paper-airplane-svg, .paper-airplane-trail').forEach(function(el) {
          el.style.setProperty('--airplane-top', top);
        });
      }
      randomizeAirplane();
    </script>
    <div class="guestbook-form">
        <label for="message">Leave a message for me:</label>
        <textarea id="message" placeholder="Type your message here..."></textarea>
        <button onclick="saveMessage()">Send</button>
        <div class="guestbook-messages" id="messages"></div>
    </div>
    <a href="cover.html" style="display:block; margin:32px auto 0 auto; text-align:center; font-family: 'Patrick Hand', cursive; font-size: 1.1em; background: #ffb6b9; color: #fff; border-radius: 8px; padding: 10px 24px; text-decoration: none; width: fit-content;">Back to Scrapbook</a>
    <script>
        function saveMessage() {
            const msg = document.getElementById('message').value.trim();
            if (!msg) return;
            let messages = JSON.parse(localStorage.getItem('guestbook') || '[]');
            messages.push(msg);
            localStorage.setItem('guestbook', JSON.stringify(messages));
            document.getElementById('message').value = '';
            renderMessages();
        }
        function renderMessages() {
            let messages = JSON.parse(localStorage.getItem('guestbook') || '[]');
            const container = document.getElementById('messages');
            container.innerHTML = '';
            messages.forEach(m => {
                const div = document.createElement('div');
                div.className = 'guestbook-message';
                div.textContent = m;
                container.appendChild(div);
            });
        }
        renderMessages();
    </script>
    <!-- Doodles and stickers outside the frame -->
    <img src="../images/doodle-heart.svg" class="doodle movable" style="right: 4vw; top: 8vh; width: 32px;">
    <img src="../images/doodle-arrow.svg" class="doodle movable" style="left: 8vw; bottom: 6vh; width: 50px;">
    <!-- Meaningful stickers -->
    <div class="doodle movable" style="left: 8vw; top: 8vh; width: 120px; background: #fffbe7; border: 2px dashed #b388ff; border-radius: 18px; padding: 6px 16px; font-family: 'Patrick Hand', cursive; color: #b388ff; font-size: 1.1em; box-shadow: 0 2px 8px #b388ff33; position: fixed;">You are loved beyond measure</div>
    <div class="doodle movable" style="right: 8vw; bottom: 8vh; width: 120px; background: #fffbe7; border: 2px solid #ff69b4; border-radius: 18px; padding: 6px 16px; font-family: 'Caveat', cursive; color: #ff69b4; font-size: 1.2em; box-shadow: 0 2px 8px #ff69b433; position: fixed;">Leave a note for us!</div>
</body>
</html>
